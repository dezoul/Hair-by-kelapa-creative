{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: calc({{ section.settings.padding_top }}px * 0.75);
    padding-bottom: calc({{ section.settings.padding_bottom }}px  * 0.75);
  }

  .custom-menu-nav{
    display: flex;
    gap: 0.5rem;
    height: fit-content;
    position: sticky;
    top: 71px;
    margin-top: calc(-2rem - 23px - calc({{ section.settings.padding_top }}px * 0.75));
    margin-left: calc(-1* var(--side-padding-universal));
    padding: 1.5rem var(--side-padding-universal) 0rem;
    overflow-x: scroll;
    max-width: 100vw;
    background-color: #C4B4A4;
    width: calc(100% + 2* var(--side-padding-universal));
}

.custom-menu-nav > span {
  font-size:2.2rem;
  font-weight: 300;
  line-height: 1.5;
  text-align: left;
  flex-shrink: 0;
  cursor: pointer
}

.custom-menu-nav > .active {
  font-weight: 600
}

.grid-menu{
  padding-top:calc(2rem + 23px );
}

.custom-treatment-menu{
  padding-top: calc({{ section.settings.padding_top }}px * 0.75);
}

@media screen and (max-width: 750px) {

.custom-menu-nav > span {
  display: inline-block;
  padding: 1rem;
  margin-right: 1rem;
}
.custom-menu-nav {
padding-top: 1rem;
padding-bottom: 1rem;
}

}


@media screen and (min-width: 750px) {
    .section-{{section.id}}-padding {
        padding-top: {{section.settings.padding_top}}px;
        padding-bottom: {{section.settings.padding_bottom}}px;
    }
     .section-{{section.id}}-padding .grid-menu {
        display: grid;
        grid-template-columns: 1fr 3fr;
        gap: 3rem;
    }

    .grid-menu {
        padding-top: 0;
    }

    .custom-menu-nav {
        flex-direction: column;
        width: initial;
        margin: 0;
        top: 131px;
        padding: 0;
        background-color: transparent;
    }

    .custom-treatment-menu {
        padding-top: calc({{ section.settings.padding_top }}px * 0.75);
    }
    .custom-treatment-menu{
  padding-top: 0;
}

  }


  @media screen and (max-width: 400px) {

.custom-menu-nav{
  top: 65px;
} 
  }




{%- endstyle -%}
<div class="color-{{ section.settings.color_scheme }} gradient" id="menu-start">
  <div class="section-{{ section.id }}-padding relative">
    <div class="grid-menu page-width ">
      <div class="custom-menu-nav">
        <span href="#menu-start" class="active" data-menu-targeter="all">
          all treatments
        </span>
        {% assign menuLinks = section.settings.menu-links | split: "," %}
      {% for menuLink in menuLinks %}
        <span href="#menu-start"  data-menu-targeter="{{menuLink |  replace: " ","-" }}">
        {{menuLink}}
        </span>{% endfor %}</div>

      <div class="custom-treatment-menu">
      {% for block in section.blocks %}
        <div class="treatments" data-menu-target="{{block.settings.cat |  replace: " ","-" }}">


          <div class="faq-grid">
            <h3 class="h3 transform-init header-style-2 margin-0 letter-spacing-init ">{{block.settings.heading}}

            </h3>
            </div>
            <div>
              {% if block.settings.shortDescription1 !="" %}
              <div class="flex-between">
                <p class="margin-0">{{block.settings.shortDescription1}}</p>
                <p class="margin-0">Rp {{block.settings.price1}} </p>
                </div>
              {% endif  %}
              
              {% if block.settings.shortDescription2 !="" %}
                <div class="flex-between">
                  <p class="margin-0">{{block.settings.shortDescription2}}</p>
                  <p class="margin-0">Rp {{block.settings.price2}} </p>
                </div>
              {% endif %}
              {% if block.settings.shortDescription3 !="" %}
                <div class="flex-between">
                  <p class="margin-0">{{block.settings.shortDescription3}}</p>
                  <p class="margin-0">Rp {{block.settings.price3}} </p>
                </div>
              {% endif %}
              {% if block.settings.shortDescription4 !="" %}
                <div class="flex-between">
                  <p class="margin-0">{{block.settings.shortDescription4}}</p>
                  <p class="margin-0">Rp {{block.settings.price4}} </p>
                </div>
              {% endif %}
              {% if block.settings.shortDescription5 !="" %}
                <div class="flex-between">
                  <p class="margin-0">{{block.settings.shortDescription5}}</p>
                  <p class="margin-0">Rp {{block.settings.price5}} </p>
                </div>
              {% endif %}
              {% if block.settings.shortDescription6 !="" %}
                <div class="flex-between">
                  <p class="margin-0">{{block.settings.shortDescription6}}</p>
                  <p class="margin-0">Rp {{block.settings.price6}} </p>
                </div>
              {% endif %}
              {% if block.settings.shortDescription7 !="" %}
                <div class="flex-between">
                  <p class="margin-0">{{block.settings.shortDescription7}}</p>
                  <p class="margin-0">Rp {{block.settings.price7}} </p>
                </div>
              {% endif %}
              {% if block.settings.shortDescription8 !="" %}
                <div class="flex-between">
                  <p class="margin-0">{{block.settings.shortDescription8}}</p>
                  <p class="margin-0">Rp {{block.settings.price8}} </p>
                </div>
              {% endif %}
              {% if block.settings.shortDescription9 !="" %}
                <div class="flex-between">
                  <p class="margin-0">{{block.settings.shortDescription9}}</p>
                  <p class="margin-0">Rp {{block.settings.price9}} </p>
                </div>
              {% endif %}
              {% if block.settings.shortDescription10  !="" %}
                <div class="flex-between">
                  <p class="margin-0">{{block.settings.shortDescription10}}</p>
                  <p class="margin-0">Rp {{block.settings.price10}} </p>
                </div>
              {% endif %}
    
                
            <p>{{block.settings.description}}</p>
    
            <p class="text-right book-p"><a class="bold-link" target="_blank" href="https://api.whatsapp.com/send/?phone=6287725855520&text={{block.settings.book-now-message | replace: ' ','%20'}}">Book Now</a></p>
          </div>
          {% unless forloop.last %}
            <hr class="trailing-line">
          {% endunless %}

        </div>
        {% endfor %}


      </div>

    </div>  


  </div>
</div>

<script>
  const menuLinks = document.querySelectorAll('.custom-menu-nav span')
  const treatments = document.querySelectorAll('.custom-treatment-menu .treatments')
  const fullmenu = document.querySelector('#menu-start')

  function scrollToTargetAdjusted(offset,element){

    var headerOffset = offset;
    var elementPosition = element.getBoundingClientRect().top;
    var offsetPosition = elementPosition + window.pageYOffset - headerOffset;
    window.scrollTo({
         top: offsetPosition,
         behavior: "smooth"
    });
}
        function filterMenu() {
          // console.log(this, this.dataset.menuTargeter)
          let target = this.dataset.menuTargeter
          // console.log(target)
          menuLinks.forEach( link => {
            if (target == link.dataset.menuTargeter) {
              link.classList.add('active')
              } else {
                link.classList.remove('active')
            }
          }
          )
          treatments.forEach( treatment => {
            // console.log(target)
            if (target == 'all'){
              treatment.classList.remove('hidden')
            } else { 
              if (target == treatment.dataset.menuTarget) {
                    treatment.classList.remove('hidden')
                  } else {
                    treatment.classList.add('hidden')
                  }
            }
          }
          )

          setTimeout(scrollToTargetAdjusted(70,fullmenu), 100)

        }

menuLinks.forEach(link => {
       link.addEventListener('click', filterMenu)
      }
    )

  // console.log( "new", menuLinks, treatments)
</script>

{% schema %}
{
  "name": "Custom Menu block",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "menu-links",
      "label": "Menu Categories",
      "info": "Seperate each category with a , and no space"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 52
    }
  ],"blocks": [
       {
      "type": "text",
      "name": "treatment",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "treatment heading"
        },
        {
          "type": "text",
          "id": "cat",
          "label": "Menu category"
        },
        {
          "type": "text",
          "id": "shortDescription1",
          "label": "1st short description"
        },
        {
          "type": "text",
          "id": "price1",
          "label": "1st price"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "description"
        },
        {
          "type": "text",
          "id": "book-now-message",
          "label": "book-now-message"
        },
        {
          "type": "text",
          "id": "shortDescription2",
          "label": "2nd short description"
        },
        {
          "type": "text",
          "id": "price2",
          "label": "2nd price"
        },
        {
          "type": "text",
          "id": "shortDescription3",
          "label": "3rd short description"
        },
        {
          "type": "text",
          "id": "price3",
          "label": "3rd price"
        },
        {
          "type": "text",
          "id": "shortDescription4",
          "label": "4th short description"
        },
        {
          "type": "text",
          "id": "price4",
          "label": "4th price"
        },
        {
          "type": "text",
          "id": "shortDescription5",
          "label": "5th short description"
        },
        {
          "type": "text",
          "id": "price5",
          "label": "5th price"
        },
        {
          "type": "text",
          "id": "shortDescription6",
          "label": "6th short description"
        },
        {
          "type": "text",
          "id": "price6",
          "label": "6th price"
        },
        {
          "type": "text",
          "id": "shortDescription7",
          "label": "7th short description"
        },
        {
          "type": "text",
          "id": "price7",
          "label": "7th price"
        },
        {
          "type": "text",
          "id": "shortDescription8",
          "label": "8th short description"
        },
        {
          "type": "text",
          "id": "price8",
          "label": "8th price"
        },
        {
          "type": "text",
          "id": "shortDescription9",
          "label": "9th short description"
        },
        {
          "type": "text",
          "id": "price9",
          "label": "9th price"
        },
        {
          "type": "text",
          "id": "shortDescription10",
          "label": "10th short description"
        },
        {
          "type": "text",
          "id": "price10",
          "label": "10th price"
        }
    ]
  }
  ],
  "presets": [
    {
      "name": "Custom Menu block"
    }
  ]
}
{% endschema %}


